<table mat-table [dataSource]="this.rows" class="mat-elevation-z8 basic-margin">

	<ng-container *ngFor="let headerRow of this.headers; let isFirstHeaderRow = first; let isLastHeaderRow = last">

		<ng-container *ngFor="let header of headerRow; let index = index; let isFirstHeader = first; let isLastHeader = last"
			[matColumnDef]="header.code">
			<th mat-header-cell *matHeaderCellDef [ngClass]="!isLastHeaderRow && isFirstHeader ? 'hidden' : ''"
				[attr.rowspan]="header.code === 'user3' ? 3 : 1" [attr.colSpan]="header.colSpan">
				{{header.displayValue}}
			</th>

			<ng-container *ngIf="isFirstHeaderRow">
				<td mat-cell *matCellDef="let element" [attr.rowspan]="isFirstHeader ? 2 : 1"
					[attr.colspan]="getRowSpan(element, index, header.code, isFirstHeader, isLastHeader)"
					[ngClass]="getRowClasses(element, index, header.code, isFirstHeader, isLastHeader)">
					{{this.getTimeSlotDisplayValue(element, header.code)}}
				</td>
			</ng-container>
		</ng-container>
	</ng-container>


	<ng-container *ngFor="let h of this.headersCodes.slice().reverse()">
		<tr mat-header-row *matHeaderRowDef="h; sticky: true"></tr>
	</ng-container>


	<tr mat-row *matRowDef="let row; columns: this.headersCodes[0];"></tr>
</table>