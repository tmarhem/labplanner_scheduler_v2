<table mat-table [dataSource]="this.rows" class="mat-elevation-z8 basic-margin">

	<!--- Note that these columns can be defined in any order.
        The actual rendered columns are set as a property on the row definition" -->

	<!-- First header  and rows-->
	<ng-container *ngFor="let header of headers[0]; let i = index; let first = first; let last = last"
		[matColumnDef]="header.code">
		<th mat-header-cell *matHeaderCellDef 
    [ngClass]="first ? 'hidden' : ''"
    >
			{{header.displayValue}}
		</th>

		<td mat-cell *matCellDef="let element" [attr.rowspan]="i === 0 ? 2 : 1"
			[attr.colspan]="getRowSpan(element, i, header.code, first, last)"
			[ngClass]="getRowClasses(element, i, header.code, first, last)">
			{{this.getTimeSlotDisplayValue(element, header.code)}}
		</td>
	</ng-container>

	<!-- Second Headers -->
	<ng-container *ngFor="let secondHeader of headers[1]; let first = first" [matColumnDef]="secondHeader.code">
		<th mat-header-cell *matHeaderCellDef 
      [attr.colSpan]="secondHeader.colSpan"
      [ngClass]="first ? 'hidden' : ''"
      >
			{{secondHeader.displayValue}}
		</th>
	</ng-container>

	<!-- Third headers -->
	<ng-container *ngFor="let thirdHeader of headers[2]; let i = index" [matColumnDef]="thirdHeader.code">
		<th mat-header-cell *matHeaderCellDef 
      [attr.colSpan]="thirdHeader.colSpan"
			[attr.rowspan]="thirdHeader.code === 'user3' ? 3 : 1">
			{{thirdHeader.displayValue}}
		</th>
	</ng-container>

  <ng-container *ngFor="let h of this.headersCodes.slice().reverse()">
    <tr mat-header-row *matHeaderRowDef="h; sticky: true"></tr>
  </ng-container>


	<tr mat-row *matRowDef="let row; columns: this.headersCodes[0];"></tr>
</table>