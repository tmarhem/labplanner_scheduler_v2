<div class="basic-margin scheduler">
	<mat-form-field class="basic-margin">
		<mat-label>Filter</mat-label>
		<input matInput (keyup)="applyFilter($event)" placeholder="User, project, client, ...">
  </mat-form-field>

		<table mat-table [dataSource]="this.dataSource">

			<ng-container
				*ngFor="let headerRow of this.headers; let isFirstHeaderRow = first; let isLastHeaderRow = last">

				<ng-container
					*ngFor="let header of headerRow; let index = index; let isFirstHeader = first; let isLastHeader = last"
					[matColumnDef]="header.code">
					<th mat-header-cell *matHeaderCellDef
						[ngClass]="!isLastHeaderRow && isFirstHeader ? 'hidden' : header.isSelected ? 'selected' : ''"
						[attr.rowspan]="header.code === 'user3' ? 3 : 1" [attr.colSpan]="header.colSpan"
						[id]="header.code"
						(mousedown)="onClickAction('HEADER', $event.type, $event.target.id, index,  $event.ctrlKey)"
						(mouseup)="onClickAction('HEADER', $event.type, $event.target.id, index, $event.ctrlKey)"
						(mouseenter)="onClickAction('HEADER', $event.type, $event.target.id, index, $event.ctrlKey)">
						{{header.displayValue}}
					</th>

					<ng-container *ngIf="isFirstHeaderRow">
						<td mat-cell *matCellDef="let element" [attr.rowspan]="this.HIDE ? 1 : isFirstHeader ? 2 : 1"
							[attr.colspan]="getRowSpan(element, index, isFirstHeader, isLastHeader)"
							[ngClass]="getRowClasses(element, index, isFirstHeader, isLastHeader)"
							(mousedown)="onClickAction('CELL', $event.type, $event.target.id, index,  $event.ctrlKey)"
							(mouseup)="onClickAction('CELL', $event.type, $event.target.id, index, $event.ctrlKey)"
							(mouseenter)="onClickAction('CELL', $event.type, $event.target.id, index, $event.ctrlKey)"
							(mouseleave)="onClickAction('CELL', $event.type, $event.target.id, index, $event.ctrlKey)">
							{{this.getTimeSlotDisplayValue(element, header.code)}}
						</td>
					</ng-container>
				</ng-container>
			</ng-container>


			<ng-container *ngFor="let h of this.headersCodes.slice().reverse(); let index = index">
				<tr mat-header-row *matHeaderRowDef="h; sticky: true"
					(mouseleave)="onClickAction('HEADER',$event.type, null, index, $event.ctrlKey)"></tr>
			</ng-container>



			<tr mat-row *matRowDef="let row; columns: this.headersCodes[0];"></tr>
		</table>
		<mat-paginator [pageSizeOptions]="[8, 16, 32, 64]"></mat-paginator>
</div>